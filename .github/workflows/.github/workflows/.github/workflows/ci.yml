name: CI Pipeline

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:

jobs:
  build-and-validate:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Greeting
        run: echo "üëã Hello, CI is running!"

      - name: Check Workflows Directory
        run: |
          if [ -d ".github/workflows" ]; then
            echo "üîç .github/workflows directory exists:"
            ls -la .github/workflows/
          else
            echo "‚ö†Ô∏è .github/workflows directory not found"
          fi

      - name: Validate YAML Syntax
        run: |
          echo "‚úÖ Validating workflow YAML files..."
          pip install pyyaml
          if [ -d ".github/workflows" ]; then
            for file in .github/workflows/*.yml; do
              echo "Checking $file..."
              python3 -c "import yaml; yaml.safe_load(open('$file'))"
              echo "‚úÖ $file is valid"
            done
          else
            echo "‚ö†Ô∏è No workflow YAML files to validate"
          fi

      - name: List All Workflows
        run: |
          echo "üìã All available workflows:"
          find .github/workflows/ -name "*.yml" -exec basename {} \; || echo "‚ö†Ô∏è No workflow files found"

      - name: Future CI Placeholder
        run: |
          echo "üöÄ Placeholder for future CI tasks: testing, linting, building, deploying..."
